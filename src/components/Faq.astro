---
import type { CollectionEntry } from 'astro:content';
import ChevronDown from './icons/ChevronDown.astro';

interface Props {
  data: CollectionEntry<'sections'>;
}

const { data } = Astro.props;
const { sectionMeta, items } = data.data;
---

<!-- ====== FAQ Section Start -->
<section class="relative z-20 overflow-hidden bg-white dark:bg-dark pt-20 pb-8 lg:pt-[120px] lg:pb-[70px]">
  <div class="container">
    <div class="flex flex-wrap -mx-4">
      <div class="w-full px-4">
        <div class="mx-auto mb-[60px] max-w-[520px] text-center">
          <span class="block mb-2 text-lg font-semibold text-primary">
            {sectionMeta.sectionTitle}
          </span>
          <h2 class="text-dark dark:text-white mb-3 text-3xl leading-[1.2] font-bold sm:text-4xl md:text-[40px]">
            {sectionMeta.sectionHeading}
          </h2>
          <p class="mx-auto max-w-[485px] text-base text-body-color dark:text-dark-6">
            {sectionMeta.sectionDescription}
          </p>
        </div>
      </div>
    </div>

    <div class="-mx-4 flex flex-wrap">
      <div class="w-full px-4">
        <div class="flex flex-wrap -mx-4">
          {
            items.map((faq) => (
              <div class="w-full px-4 lg:w-1/2">
                <div class="wow fadeInUp mb-12" data-wow-delay=".1s">
                  <div class="single-faq w-full rounded-lg border border-[#F3F4FE] bg-white dark:bg-dark-2 dark:border-dark-3 p-5 sm:p-8">
                    <button class="faq-btn flex w-full items-center text-left">
                      <div class="mr-5 flex h-10 w-full max-w-[40px] items-center justify-center rounded-lg bg-primary/5 text-primary">
                        <ChevronDown class="fill-current icon" />
                      </div>
                      <div class="w-full">
                        <h4 class="text-base font-semibold text-dark dark:text-white sm:text-lg">
                          {faq.title}
                        </h4>
                      </div>
                    </button>
                    <div class="faq-content hidden pl-[62px]">
                      <p class="py-3 text-base leading-relaxed text-body-color dark:text-dark-6">
                        {faq.description}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>

  <div>
    <span class="absolute top-4 left-4 -z-[1]">
      <img src="/assets/patterns/faq-dots-1.svg" alt="" class="max-w-full" />
    </span>
    <span class="absolute bottom-4 right-4 -z-[1]">
      <img src="/assets/patterns/faq-dots-2.svg" alt="" class="max-w-full" />
    </span>
  </div>
</section>
<!-- ====== FAQ Section End -->

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const faqBtns = document.querySelectorAll('.faq-btn');
    
    faqBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const content = btn.nextElementSibling;
        const icon = btn.querySelector('.icon');
        
        // Toggle content
        content.classList.toggle('hidden');
        
        // Rotate icon
        icon.style.transform = content.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
      });
    });
  });
</script>